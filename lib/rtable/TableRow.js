"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,o,r){return o&&e(n.prototype,o),r&&e(n,r),n}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_TableCell=require("./TableCell"),_TableCell2=_interopRequireDefault(_TableCell),_ExpandIcon=require("./ExpandIcon"),_ExpandIcon2=_interopRequireDefault(_ExpandIcon),TableRow=function(e){function n(e){_classCallCheck(this,n);var o=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return o.onRowClick=function(e){var n=o.props,r=n.record,t=n.index,a=n.onRowClick,c=n.expandable,p=n.expandRowByClick,l=n.expanded,s=n.onExpand;c&&p&&s(!l,r,t),a(r,t,e)},o.onRowDoubleClick=function(e){var n=o.props,r=n.record,t=n.index,a=n.onRowDoubleClick;a(r,t,e)},o.onMouseEnter=function(){var e=o.props,n=e.onHover,r=e.hoverKey;n(!0,r)},o.onMouseLeave=function(){var e=o.props,n=e.onHover,r=e.hoverKey;n(!1,r)},o.state={hovered:!1},o}return _inherits(n,e),_createClass(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,o=n.store,r=n.hoverKey;this.unsubscribe=o.subscribe(function(){o.getState().currentHoverKey===r?e.setState({hovered:!0}):e.state.hovered===!0&&e.setState({hovered:!1})})}},{key:"componentWillUnmount",value:function(){var e=this.props,n=e.record,o=e.onDestroy,r=e.index;o(n,r),this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props,n=e.prefixCls,o=e.columns,r=e.record,t=e.height,a=e.visible,c=e.index,p=e.expandIconColumnIndex,l=e.expandIconAsCell,s=e.expanded,i=e.expandRowByClick,u=e.expandable,d=e.onExpand,f=e.needIndentSpaced,y=e.indent,_=e.indentSize,b=this.props.className;this.state.hovered&&(b+=" "+n+"-hover");for(var h=[],x=_react2.default.createElement(_ExpandIcon2.default,{expandable:u,prefixCls:n,onExpand:d,needIndentSpaced:f,expanded:s,record:r}),v=0;v<o.length;v++){l&&0===v&&h.push(_react2.default.createElement("td",{className:n+"-expand-icon-cell",key:"ray-table-expand-icon-cell"},x));var C=!l&&!i&&v===p;h.push(_react2.default.createElement(_TableCell2.default,{prefixCls:n,record:r,indentSize:_,indent:y,index:c,column:o[v],key:o[v].key,expandIcon:C?x:null}))}var T={height:t};return a||(T.display="none"),_react2.default.createElement("tr",{onClick:this.onRowClick,onDoubleClick:this.onRowDoubleClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,className:n+" "+b+" "+n+"-level-"+y,style:T},h)}}]),n}(_react.Component);TableRow.propTypes={onDestroy:_react.PropTypes.func,onRowClick:_react.PropTypes.func,onRowDoubleClick:_react.PropTypes.func,record:_react.PropTypes.object,prefixCls:_react.PropTypes.string,expandIconColumnIndex:_react.PropTypes.number,onHover:_react.PropTypes.func,columns:_react.PropTypes.array,height:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.number]),visible:_react.PropTypes.bool,index:_react.PropTypes.number,hoverKey:_react.PropTypes.any,expanded:_react.PropTypes.bool,expandable:_react.PropTypes.any,onExpand:_react.PropTypes.func,needIndentSpaced:_react.PropTypes.bool,className:_react.PropTypes.string,indent:_react.PropTypes.number,indentSize:_react.PropTypes.number,expandIconAsCell:_react.PropTypes.bool,expandRowByClick:_react.PropTypes.bool,store:_react.PropTypes.object.isRequired},TableRow.defaultProps={onRowClick:function(){},onRowDoubleClick:function(){},onDestroy:function(){},expandIconColumnIndex:0,expandRowByClick:!1,onHover:function(){}},exports.default=TableRow;